# JPA (Java Persistence API)

## 1. JPA 란?

### 1-1 영속성의 이해 (1/3) - 개요
- 영속성은 사전적 의미로는 영원히 계속되는 성질이나 능력을 뜻합니다.
- 어플리케이션의 상태와 상관 없도록 물리적인 저장소를 이용해 데이터를 저장하는 행위를 영속화라고 할 수 있습니다.
- 데이터를 어떤 공간에 어떤 형태로 저장할 것인지에 따라 영속화 방식은 달라질 수 있습니다.
- 보편적으로 적용되는 RDBMS 에 데이터를 저장하기 위해서는 SQL 을 이용해 데이터를 영속화 해야 합니다.

### 1-1 영속성의 이해 (2/3) - JDBC API (1/2)
- Java 어플리케이션에서 데이터베이스에 접근 하는 방법은 기본적으로 JDBC 인터페이스를 통한 방법입니다.
- JDBC 인터페이스는 Java 어플리케이션과 데이터베이스의 소통을 위한 기능들을 정의하고 있습니다.
- 각 데이터베이스 제조사들은 JDBC 인터페이스를 구현하는 클래스들을 제공하며 이를 드라이버 라고 합니다.
- 순수 JDBC 기반의 영속적 데이터 관리는 개발 과정에서 다소 많은 시간과 비용을 발생하게 합니다.

### 1-1 영속성의 이해 (3/3) - JDBC API (2/2)
- DBMS 의 데이터 관리는 SQL (Structured Query Language) 을 통해 이루어집니다.
- 데이터베이스에 접속부터 질의 (Query) 를 보내고, 결과를 받는 것까지 전체 과정에서 Java 와 데이터베이스 간의 변환 절차가 필요합니다.
- 순수 JDBC 를 적용하여 데이터를 관리할 경우, Java 코드와 SQL 코드를 동일한 파일에서 관리하게 됩니다.

### 1-2 자원 (resource) 접근 레이어
- 비지니스 컴포넌트는 비지니스 로직 레이어에, 자원 접근 모듈은 자원 접근 레이어에 놓여 있습니다.
- 이들 간의 관계를 생각할 때, 좌측에 표현한 레이어 관점에서 볼 수 있습니다.
- 어떤 객체 정보 (ex. Customer) 가 자원 접근 레이어를 통해서 저장될 때는 하나의 인터페이스를 타고 들어갑니다.
- 하지만, 실제로 그 데이터가 저장되는 경로는 자원 접근 레이어에서 어떤 모듈이 처리하는가에 따라 다릅니다.

### 1-3 객체의 세상과 테이블의 세상 (1/3)
- 객체 중심의 객체지향 어플리케이션과 테이블 중심의 관계형 데이터베이스는 서로의 목표가 다릅니다.
- 이를 패러다임이 일치하지 않는다고 표현하며, 이는 개발 과정에서 많은 비용을 발생하게 합니다.
- 영속적으로 데이터를 저장하기 위해 객체의 세상과 테이블의 세상을 서로 맞추는 과정이 필요합니다.
  
| 객체지향 모델                     | 관계형 모델          |
|-----------------------------|-----------------|
| 객체, 클래스                     | 테이블, 로우         |
| 속성 (attribute, property)    | 컬럼              |
| Identity                    | Primary Key     |
| Relationship / 다른 Entity 참조 | Foreign Key     |
| 상속 / 다형성                    | 없음              |
| 메서드                         | SQL 로직, SP, 트리거 |
| 코드의 이식성                     | 벤더 종속적임         |

### 1-3 객체의 세상과 테이블의 세상 (2/3)
- Java 어플리케이션에서 관계형 데이터베이스의 사용을 돕는 프레임워크를 Persistence Framework 라 합니다.
- Persistence Framework 는 SQL Mapping 과 OR Mapping 으로 구분합니다.
- SQL Mapping 은 Java 코드와 SQL 을 분리하며, 개발자가 작성한 SQL 의 수행 결과를 객체로 매핑합니다.
- OR Mapping 은 객체와 관계형 데이터베이스 사이에서 매핑을 담당하며 SQL 을 생성하여 패러다임의 불일치를 해결합니다.

### 1-3 객체의 세상과 테이블의 세상 (3/3)
- Persistence Framework 는 로직에서 DB 연결 설정을 분리하여, 개발자가 비지니스 로직에 집중할 수 있도록 도와줍니다.
  - 순수 JDBC 를 적용하면, DB 자원 연결 및 사용에 관련된 코드가 메서드마다 중복됩니다.
  - 상황에 맞는 Persistence Framework 를 적용하면, 개발 편의성 뿐 아니라 성능 유지보수에도 큰 이점이 됩니다.
- 관계형 데이터 접근 프레임워크는 크게 SQL Mapping 과 OR Mapping 접근 기반 프레임워크로 나눠집니다.
  - SQL Mapping 프레임워크는 Java 객체와 쿼리 결과를 매핑합니다.
  - OR Mapping 프레임워크는 Java 객체와 데이터베이스 릴레이션 (테이블)을 매핑합니다.

### 1-4 JPA (Java Persistence API) 의 이해


### 1-5 JPA 기초 실습